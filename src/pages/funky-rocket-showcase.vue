<template>
  <div class="p-6 min-h-screen bg-gradient-to-br from-blue-900 to-indigo-900 text-white">
    <div class="max-w-6xl mx-auto">
      <div class="text-center mb-8">
        <h1 class="text-4xl font-bold mb-4 bg-gradient-to-r from-blue-400 to-cyan-400 bg-clip-text text-transparent">
          ğŸ¸ Funky Rocket å‹•ç•«å±•ç¤º
        </h1>
        <p class="text-xl text-gray-300 max-w-3xl mx-auto">
          å±•ç¤º Funky Rocket ç´ æåŒ…çš„å…¨æ–°ä¸‰å€‹æ ¸å¿ƒå‹•ç•«ï¼šwalkã€jumpã€rocket
        </p>
        <div class="mt-4 p-4 bg-blue-900/30 border border-blue-600/50 rounded-lg max-w-2xl mx-auto">
          <p class="text-blue-200 text-sm">
            âœ¨ <strong>å…¨æ–°ç´ æ</strong>ï¼šç°¡åŒ–çš„æª”æ¡ˆçµæ§‹ï¼Œçµ±ä¸€çš„å‹•ç•«é«”é©—
          </p>
        </div>
      </div>

      <!-- åŠŸèƒ½ç‰¹è‰² -->
      <div class="grid md:grid-cols-3 gap-6 mb-8">
        <div class="bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20">
          <div class="text-3xl mb-4">ğŸš¶</div>
          <h3 class="text-xl font-semibold mb-3">è¡Œèµ°å‹•ç•«</h3>
          <p class="text-gray-300 text-sm">
            æµæš¢çš„è§’è‰²ç§»å‹•å‹•ç•«ï¼Œé©ç”¨æ–¼æ‰€æœ‰è§’è‰²é¡å‹
          </p>
        </div>

        <div class="bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20">
          <div class="text-3xl mb-4">ğŸ¦˜</div>
          <h3 class="text-xl font-semibold mb-3">è·³èºå‹•ç•«</h3>
          <p class="text-gray-300 text-sm">
            å‹•æ„Ÿçš„è·³èºå‹•ä½œï¼ŒåŒ…å«å®Œæ•´çš„èµ·è·³å’Œè½åœ°
          </p>
        </div>

        <div class="bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20">
          <div class="text-3xl mb-4">ğŸš€</div>
          <h3 class="text-xl font-semibold mb-3">ç«ç®­å‹•ç•«</h3>
          <p class="text-gray-300 text-sm">
            å®Œæ•´çš„ç«ç®­å‹•ç•«ç³»çµ±ï¼Œæ”¯æ´å¤šç¨®ç‹€æ…‹
          </p>
        </div>
      </div>

      <!-- å‹•ç•«é¸æ“‡ -->
      <div class="bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20 mb-8">
        <h2 class="text-2xl font-semibold mb-6">é¸æ“‡å‹•ç•«</h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
          <div
            v-for="animation in animations"
            :key="animation.name"
            @click="selectAnimation(animation)"
            :class="[
              'p-4 border-2 rounded-xl cursor-pointer transition-all transform hover:scale-105',
              selectedAnimationName === animation.name
                ? 'border-blue-400 bg-blue-400/20 shadow-lg'
                : 'border-white/30 hover:border-white/50 hover:bg-white/10'
            ]"
          >
            <div class="flex items-center gap-3 mb-2">
              <span class="text-2xl">{{ animation.icon }}</span>
              <h3 class="font-semibold">{{ animation.displayName }}</h3>
            </div>
            <p class="text-sm text-gray-300">{{ animation.description }}</p>
            <div class="mt-2 text-xs text-gray-400">
              {{ animation.features.join(' â€¢ ') }}
            </div>
          </div>
        </div>
      </div>

      <!-- å‹•ç•«æ’­æ”¾å™¨ -->
      <div v-if="selectedAnimationData" class="bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20">
        <div class="flex justify-between items-center mb-6">
          <div>
            <h2 class="text-2xl font-semibold flex items-center gap-3">
              <span class="text-3xl">{{ selectedAnimationData.icon }}</span>
              {{ selectedAnimationData.displayName }}
            </h2>
            <p class="text-gray-300 mt-1">{{ selectedAnimationData.description }}</p>
          </div>
          
          <div class="text-right">
            <div class="text-sm text-gray-400">
              ç‰¹è‰²åŠŸèƒ½: {{ selectedAnimationData.features.join(' â€¢ ') }}
            </div>
          </div>
        </div>
        
        <div class="flex justify-center">
          <SimpleSpineRefactored
            :atlas-path="selectedAnimationData.atlasPath"
            :image-path="selectedAnimationData.imagePath"
            :skel-path="selectedAnimationData.skelPath"
            :width="800"
            :height="600"
          />
        </div>
      </div>

      <div v-else class="bg-white/10 backdrop-blur-lg rounded-2xl p-12 border border-white/20 text-center">
        <div class="text-6xl mb-4">ğŸ¸</div>
        <h3 class="text-2xl font-semibold mb-2">é¸æ“‡ä¸€å€‹å‹•ç•«é–‹å§‹é«”é©—</h3>
        <p class="text-gray-300">é»æ“Šä¸Šæ–¹çš„å‹•ç•«å¡ç‰‡ä¾†è¼‰å…¥å’Œæ’­æ”¾ Funky Rocket å‹•ç•«</p>
      </div>

      <!-- ç´ æåŒ…èªªæ˜ -->
      <div class="mt-8 bg-white/5 backdrop-blur-lg rounded-2xl p-6 border border-white/10">
        <h3 class="text-xl font-semibold mb-4">ğŸ“¦ ç´ æåŒ…è³‡è¨Š</h3>
        <div class="grid md:grid-cols-2 gap-6 text-sm">
          <div>
            <h4 class="font-semibold text-blue-300 mb-2">æª”æ¡ˆçµæ§‹</h4>
            <ul class="space-y-1 text-gray-300">
              <li>â€¢ /public/funkyRocket/spine/walk/</li>
              <li>â€¢ /public/funkyRocket/spine/jump/</li>
              <li>â€¢ /public/funkyRocket/spine/rocket/</li>
              <li>â€¢ ç°¡åŒ–çš„å‘½åæ–¹å¼</li>
            </ul>
          </div>
          <div>
            <h4 class="font-semibold text-cyan-300 mb-2">å‹•ç•«ç‰¹è‰²</h4>
            <ul class="space-y-1 text-gray-300">
              <li>â€¢ çµ±ä¸€çš„è§’è‰²å‹•ç•«ç³»çµ±</li>
              <li>â€¢ é«˜è³ªé‡çš„éª¨éª¼å‹•ç•«</li>
              <li>â€¢ æµæš¢çš„å‹•ä½œè¡¨ç¾</li>
              <li>â€¢ é©åˆéŠæˆ²å ´æ™¯ä½¿ç”¨</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- éŠæˆ²æ¼”ç¤ºé€£çµ -->
      <div class="mt-8 bg-gradient-to-r from-blue-600/20 to-indigo-600/20 backdrop-blur-lg rounded-2xl p-6 border border-blue-400/30">
        <div class="text-center">
          <h3 class="text-xl font-semibold mb-3 text-blue-300">ğŸ® å®Œæ•´éŠæˆ²é«”é©—</h3>
          <p class="text-gray-300 mb-4">
            é€™äº›å‹•ç•«å·²ç¶“æ•´åˆåˆ°å®Œæ•´çš„éŠæˆ²æ¼”ç¤ºä¸­ï¼Œé«”é©—è§’è‰²ä¸Šè»Šã€ç«ç®­ç™¼å°„ã€ä¸‹è»Šçš„å®Œæ•´æµç¨‹
          </p>
          <RouterLink 
            to="/funky-rocket-demo"
            class="inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 rounded-xl transition-all transform hover:scale-105 shadow-lg"
          >
            ğŸš€ é«”é©—å®Œæ•´éŠæˆ²
          </RouterLink>
        </div>
      </div>

      <!-- è¿”å›æŒ‰éˆ• -->
      <div class="mt-8 text-center">
        <RouterLink 
          to="/" 
          class="inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 rounded-xl transition-all transform hover:scale-105 shadow-lg"
        >
          â† è¿”å›ä¸»é 
        </RouterLink>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref, computed } from 'vue'
import { RouterLink } from 'vue-router'
import SimpleSpineRefactored from '@/components/animation/SimpleSpineRefactored.vue'

interface AnimationData {
  name: string
  displayName: string
  description: string
  icon: string
  features: string[]
  atlasPath: string
  imagePath: string
  skelPath: string
}

const selectedAnimationName = ref<string | null>(null)

// Funky Rocket å°ˆç”¨å‹•ç•«é…ç½®ï¼ˆå›ºå®šä½¿ç”¨ funkyRocket ç´ æåŒ…ï¼‰
const animationConfigs = [
  {
    name: 'walk',
    displayName: 'è¡Œèµ°å‹•ç•«',
    description: 'è§’è‰²çš„æ¨™æº–è¡Œèµ°å‹•ç•«ï¼Œé©ç”¨æ–¼ä¸Šè»Šå’Œç§»å‹•å ´æ™¯',
    icon: 'ğŸš¶',
    features: ['å¾ªç’°æ’­æ”¾', 'å¹³æ»‘å‹•ä½œ', 'é€šç”¨è§’è‰²'],
    spineFolder: 'walk'
  },
  {
    name: 'jump',
    displayName: 'è·³èºå‹•ç•«',
    description: 'å‹•æ„Ÿçš„è·³èºå‹•ä½œï¼Œç”¨æ–¼è§’è‰²ä¸‹è»Šå’Œç‰¹æ®Šå‹•ä½œ',
    icon: 'ğŸ¦˜',
    features: ['å–®æ¬¡æ’­æ”¾', 'æ‹‹ç‰©ç·šå‹•ä½œ', 'è‘—åœ°æ•ˆæœ'],
    spineFolder: 'jump'
  },
  {
    name: 'rocket',
    displayName: 'ç«ç®­å‹•ç•«',
    description: 'å®Œæ•´çš„ç«ç®­å‹•ç•«ç³»çµ±ï¼ŒåŒ…å« launchã€flyingã€explosion ç­‰ç‹€æ…‹',
    icon: 'ğŸš€',
    features: ['å¤šç‹€æ…‹åˆ‡æ›', 'è¤‡é›œå‹•ç•«', 'ç²’å­æ•ˆæœ'],
    spineFolder: 'rocket'
  }
]

// å‹•ç•«åˆ—è¡¨ - å›ºå®šä½¿ç”¨ funkyRocket è·¯å¾‘
const animations = computed<AnimationData[]>(() => {
  return animationConfigs.map(config => {
    const basePath = `/funkyRocket/spine/${config.spineFolder}`
    return {
      name: config.name,
      displayName: config.displayName,
      description: config.description,
      icon: config.icon,
      features: config.features,
      atlasPath: `${basePath}/${config.spineFolder}.atlas`,
      imagePath: `${basePath}/${config.spineFolder}.png`,
      skelPath: `${basePath}/${config.spineFolder}.skel`
    }
  })
})

// é¸ä¸­çš„å‹•ç•«æ•¸æ“š
const selectedAnimationData = computed<AnimationData | null>(() => {
  if (!selectedAnimationName.value) return null
  return animations.value.find(anim => anim.name === selectedAnimationName.value) || null
})

/**
 * é¸æ“‡å‹•ç•«
 */
function selectAnimation(animation: AnimationData): void {
  selectedAnimationName.value = animation.name
}
</script>
